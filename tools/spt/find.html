<!DOCTYPE html>
<html lang="en">
<head>
    <title>Finder</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Tool for finding words inside a text">
    <meta name="author" content="bestGaming132">
    <meta name="keywords" content="tool, tools, finder" />
    <link rel="stylesheet" href="../toolstyle.css">
</head>
<body align="center">
    <h2 style="margin-bottom:1px">Occurrence Finder</h2>
    <p onclick="cCol()" id="cC" style="margin:1px">Click here to change <span style="color:#ff3e3e">highlight color</span></p>
    <input style="height:20px;margin-bottom:3px" class="txt" placeholder="Occurence to find" id="fW" oninput="find()"><br>
    <input type="checkbox" id="igc">
    <label for="igc">Ignore if occurrence is uppercase or lowercase</label>
    <br><br>
    <textarea style="height:20vh" placeholder="Text" class="txt" id="fT" oninput="find()"></textarea><br>
    <p id="occuNum"></p>
    <div class="txt2" id="findOp" style="height:30vh"></div>
    <script>
        var color = "#ff3e3e"
        function find() {
            let findTxt = document.getElementById("fT").value
            let findWord = document.getElementById("fW").value
            let findWordReg = new RegExp(document.getElementById("fW").value, (document.getElementById("igc").checked ? "gi" : "g"))
            let findResult = findTxt.replaceAll(findWordReg, "<span style=\"color:" + color + "\"><b>" + findWord + "</b></span>")
            let occu = findTxt.split(findWordReg).length - 1
            document.getElementById("findOp").innerHTML = findResult.replaceAll("\n", "<br>")
            document.getElementById("occuNum").innerHTML = `Found ${occu >= 1 ? occu : 0} occurences of ${findWord}`
        }
        function cCol() {
            color = prompt("Choose a color in HEX format", color)
            if (color == null || !/^#([0-9A-F]{3}){1,2}$/i.test(color)) {
                color = "#ff3e3e"
            }
            document.getElementById("cC").innerHTML = "Click here to change <span style='color:" + color + "'>highlight color</span>"
        }
    </script>
</body>
</html>
